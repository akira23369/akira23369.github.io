---
title: 2.PlayerPrefs基本方法
date: 2025-02-21 19:49:40
toc: true
categories:
  - 数据
  - 数据持久化
  - PlayerPrefs
  - PlayerPrefs基础知识

tags:
  - 数据
  - 数据持久化
  - PlayerPrefs
  - PlayerPrefs基础知识
---

# PlayerPrefs是什么
`PlayerPrefs`是Unity提供的可以用于存储读取玩家数据的公共类。
`PlayerPrefs`，你可以轻松地存储和获取一些简单的数据，例如玩家的分数、游戏设置、解锁的关卡等。这些数据将在应用程序关闭后仍然保留，可以在下次启动应用程序时继续使用。

# PlayerPrefs的数据存储
- PlayerPrefs的数据存储类似于键值对存储，一个键对应一个值。
- 提供了存储3种数据的方法 int float string。
- 键: string类型。
- 值：int float string 对应3种API。

## SetInt方法 SetFloat方法 SetString方法 存储数据
```cs
//设置由 key 标识的偏好的值。
PlayerPrefs.SetInt("第几帅", 1);
PlayerPrefs.SetFloat("存个浮点数", 1.1f);
PlayerPrefs.SetString("黄", "先生");
```

## Save方法 马上存储数据到硬盘中
直接调用Set相关方法只会把数据存到内存里。
当游戏结束时 Unity会自动把数据存到硬盘中。
如果游戏不是正常结束的而是崩溃 数据是不会存到硬盘中的。
调用该方法马上存到硬盘(各个平台默认位置)
```cs
PlayerPrefs.Save();
```

## PlayerPrefs局限性
```cs
//PlayerPrefs是有局限性的 它只能存3种类型的数据。
//如果你想要存储别的类型的数据 只能降低精度 或者上升精度来进行存储。
bool sex = true;
PlayerPrefs.SetInt("sex", sex ? 1 : 0);
```

## 如果不同类型用同一键名进行存储 会进行覆盖
```cs
PlayerPrefs.SetInt("myAge", 18);
PlayerPrefs.SetFloat("myAge", 20.2f);//覆盖上一行存储的myAge数据
```


## 读取相关
```cs
// 如果填了第二个参数代表没找到就返回后的默认值, 可用来进行基础数据的初始化
string test = PlayerPrefs.GetString("黄");     
```
**注意**：
1. 运行时只要你Set了对应键值对 即使你没有马上存储Save在本地 也能够读取出信息
2. 如果存的是`SetInt("myAge"， 18);` 读取的是`GetFloat("myAge");`则会使用Float默认值0

## 键的存在与删除
```cs
if (PlayerPrefs.HasKey("测试"))
{
	// 删除
	// 根据键来删除
	PlayerPrefs.DeleteKey("测试");
	// 删除所有键值对
	PlayerPrefs.DeleteAll();
}
```

