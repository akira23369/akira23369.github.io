---
title: 9.反射读取List数据类型
date: 2025-02-24 10:45:53
toc: true
categories:
  - 数据
  - 数据持久化
  - PlayerPrefs
  - PlayerPrefs实践项目

tags:
  - 数据
  - 数据持久化
  - PlayerPrefs
  - PlayerPrefs实践项目
---

```cs
private object LoadValue(Type fieldType, string key)
{
    if (fieldType == typeof(int))
    {
        return PlayerPrefs.GetInt(key, 0);
    }
    else if (fieldType == typeof(float))
    {
        return PlayerPrefs.GetFloat(key, 0);
    }
    else if (fieldType == typeof(string))
    {
        return PlayerPrefs.GetString(key, "");
    }
    else if (fieldType == typeof(bool))
    {
        return PlayerPrefs.GetInt(key, 0) == 1 ? true : false;
    }
    else if (typeof(IList).IsAssignableFrom(fieldType))
    {
        int count = PlayerPrefs.GetInt(key, 0);
        IList list = Activator.CreateInstance(fieldType) as IList;
        Type type = fieldType.GetGenericArguments()[0];
        for (int i = 0; i < count; i++)
        {
            list.Add(LoadValue(type, $"{key}_{i}"));
        }
        return list;
    }
}
```
