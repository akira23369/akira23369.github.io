---
title: 9.CSharp中XML反序列化
date: 2025-03-06 19:07:07
toc: true
categories:
  - 数据
  - 数据持久化
  - XML
  - XML基础知识

tags:
  - 数据
  - 数据持久化
  - XML
  - XML基础知识
---

# 知识回顾 {% post_link 8.CSharp中XML序列化 序列化%}

# 判断文件是否存在

```cs
string path = Application.persistentDataPath + "/Lesson1Test.xml";
// 存在再进行反序列化的处理，不存在就不能反序列化
if (File.Exists(path))
{
    // 反序列化处理
}
```

# 反序列化
**关键类和语法**
XmlSerializer 
StreamReader 
{% post_link csharp的using语句 %}

**注意**
`public List<int> listInt = new List<int> { 1, 2, 3 };` 反序列化出来的 `listInt` 会有 {1, 2, 3, 1, 2, 3 };
最好不要在读取的类的列表成员变量声明时初始化就赋值
```cs
public PlayerData LoadPlayerData(string path)
{
    if (!File.Exists(path)) return null;

    XmlSerializer serializer = new XmlSerializer(typeof(PlayerData));
    using (StreamReader reader = new StreamReader(path))
    {
        return (PlayerData)serializer.Deserialize(reader);
    }
}
```

