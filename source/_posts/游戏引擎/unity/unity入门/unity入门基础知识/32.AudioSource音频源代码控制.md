---
title: 32.AudioSource音频源代码控制
date: 2025-02-21 15:58:00
toc: true
categories:
  - 游戏引擎
  - unity
  - unity入门
  - unity入门基础知识

tags:
  - 游戏引擎
  - unity
  - unity入门
  - unity入门基础知识
  - 核心系统
  - 音效系统
---
# 代码控制播放停止
```csharp
_audioSource = GetComponent<AudioSource>();

// 按下p键播放
if (Input.GetKeyDown(KeyCode.P))
{
    _audioSource.Play();
    //_audioSource.PlayDelayed(4);    // 4秒后播放
}
// 音频停止
if (Input.GetKeyDown(KeyCode.S))
{
    _audioSource.Stop();
}
// 音频暂停 
if (Input.GetKeyDown(KeyCode.Space))
{
    _audioSource.Pause();
    //_audioSource.UnPause();再次播放可恢复 (或者使用停止暂停
}

// 音量大小
audioSource.volume = floatValue;

// 是否静音
audioSource.mute = true
```

# 检测播放是否完毕
AudioSource没有提供相关
```csharp
// 检测音频是否播放完    
if (!_audioSource.isPlaying)
{
    print($"在Update中不断检测该属性可以判断是否播放完毕");
}
```


# 控制音频播放几种方式
1. 直接在要播放音频的对象上挂载脚本来控制
2. 自己创建一个挂载了音频脚本的GameObject(放在prefab预设体里)       用得少
   在其他脚本中实例化(如果playOnAwake实例化时播放) 这个对象
3. 用一个AudioSource来控制不同的音效 _audioSource.clip = XXX（AudioClip)

ps: 注意: 一个GameObject可以挂载多个音频源脚本AudioSource, 但一定要自己管理好, 不然谁是谁都不知道

