---
title: 19.Input输入相关
date: 2025-02-20 10:39:16
toc: true
categories:
  - 游戏引擎
  - unity
  - unity入门
  - unity入门基础知识

tags:
  - 游戏引擎
  - unity
  - unity入门
  - unity入门基础知识
  - Unity重要组件和API
---

**输入内容一定是写在Update当中的**

# 鼠标位置
屏幕坐标的原点是在左下角，右是x轴正向，上是y轴正向
```csharp
// 鼠标位置
// 返回一个Vector3, 但只有x, y有值
print(Input.mousePosition);
```

# 检测鼠标输入
```csharp
// 检测鼠标输入   (0左键, 1右键, 2滚轮
if (Input.GetMouseButtonDown(0))
    print("你按了一次 鼠标左键");
if (Input.GetMouseButtonUp(1))
    print("你抬起了一次 鼠标右键");
if (Input.GetMouseButton(0))
    print("你是一直在按着 鼠标左键");
// 返回一个Vector2, 而滚动会改变其中的y值
// y值   -1 往下棍, 0 没滚, 1 往上滚
Vector2 mouseScrollDelta = Input.mouseScrollDelta;
print(mouseScrollDelta);
```

# 检测键盘输入
```csharp
// 键盘按下 up抬起, 无长按...
if (Input.GetKeyDown(KeyCode.W))
    print("你按下了W键");
```

# 检测默认轴
记不住单词可以在Project Setting中的Input Manager查看
```csharp
// 默认轴输入
// 当键盘A,D键按下时,  返回-1 到 1之间的变换   
// 即一直按A的话, 返回值会慢慢从0变到 -1
// Input.GetAxisRaw是只会有 -1, 0, 1三个数字之间的突变
float v = Input.GetAxis("Horizontal");
print(v);

// W, S 返回-1, 到 1
float v1 = Input.GetAxis("Vertical");
print(v1);

// 鼠标横向移动   纵向  Mouse Y
float v2 = Input.GetAxis("Mouse X");
print(v2);
```

# 其它
```csharp
// 是否有任意键或鼠标长按
bool anyKey = Input.anyKey;
if (Input.anyKeyDown)
{
    print($"有一个键按下了按下的是{Input.inputString}");
}

// 得到连接的手柄的所有按钮名字
string[] strings = Input.GetJoystickNames();
for (int i = 0; i < strings.Length; i++)
{
    print("你连接的所有按钮有");
    print(strings[i]);
}
// 某一手柄键按下, 抬起, 长按...
bool v3 = Input.GetButtonDown(strings[0]);

// 移动设备触摸
if (Input.touchCount > 0)
{
    Touch touch = Input.touches[0];
    // 位置
    print(touch.position);
    // 相对上次位置的变化
    print(touch.deltaPosition);
}

// 是否启用多点触控
Input.multiTouchEnabled = true;


// 陀螺仪  (重力感应)
// 是否开启陀螺仪
Input.gyro.enabled = true;

// 重力加速度 
Vector3 gravity = Input.gyro.gravity;

// 旋转速度
Vector3 rotationRate = Input.gyro.rotationRate;

// 陀螺仪 当前旋转的四元数
// 比如用这个角度信息 来控制场景上的一个3D物体收到重力影响
// 手机怎么动, 他就怎么动
Quaternion attitude = Input.gyro.attitude;
```


# 练习
## 用WASD键控制前进后退，左右转向
```csharp
//ws键 控制位移 // 这公式 是 ： 前进方向 * 速度 * 时间 * 输入相关（-1~1 相当于 正向还是反向的感觉 不按就不动 0
this.transform.Translate(Vector3.forward * moveSpeed * Time.deltaTime * Input.GetAxis("Vertical")); //ad键 控制 左右转向 // 这公式 是 ： 转动的轴 * 速度 * 时间 * 输入相关（-1~1 相当于 正向还是反向的感觉 不按就不动 0
this.transform.Rotate(Vector3.up * rotateSpeed * Time.deltaTime * Input.GetAxis("Horizontal"));
```
## 鼠标左右移动控制炮口的转向
```cs
head.Rotate(Vector3.up * headRotateSpeed * Time.deltaTime * Input.GetAxis("Mouse X"));
```