---
title: 33.Microphone麦克风
date: 2025-02-21 16:21:52
toc: true
categories:
  - 游戏引擎
  - unity
  - unity入门
  - unity入门基础知识

tags:
---

Unity提供了`Microphone`类
 
# 获取设备信息
```csharp
// 获取设备Microphone信息
string[] strs = Microphone.devices;
for (int i = 0; i < strs.Length; i++)
    print(strs[i]);
```

# 开始, 结束录制并存储
```csharp
// 开始录制     (1. 设备名 传null使用默认设备, 2. 超过录制长度是否重新录制
//             (3. 录制时长,    4. 采样率
if (Input.GetKeyDown(KeyCode.Space))
{
    _audioClip = Microphone.Start(null, false, 10, 44100);
}

// 结束录制
if (Input.GetKeyUp(KeyCode.Space))
{
	// 为null表示默认设备
    Microphone.End(null);
    // 播放录制音频
    AudioSource audio = GetComponent<AudioSource>() ?? gameObject.AddComponent<AudioSource>();
    audio.clip = _audioClip;
    audio.Play();
	
	//AudioClip类的channels变量和samples变量
	//channels变量 音频剪辑中的声道数。（只读）
	//samples变量 样本中音频剪辑的长度。（只读）
	//规则 用于存储数组数据的长度 是用 声道数 * 剪辑长度
    float[] f = new float[_audioClip.channels * _audioClip.samples];
    // 把数据存储到浮点数数组里     第二个参数是偏离的位置, 默认填0
    _audioClip.GetData(f, 0);
}
```


